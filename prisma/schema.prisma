generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model StatusType {
  id         Int         @id @default(autoincrement())
  type       String      @unique // 'CHARACTERS' o 'EPISODES'
  statuses   Status[]    @relation("StatusTypeStatuses")
}

model Status {
  id          Int         @id @default(autoincrement())
  name        String
  statusType  StatusType  @relation("StatusTypeStatuses", fields: [statusTypeId], references: [id])
  statusTypeId Int
  characters  Character[] @relation("CharacterStatus")
  episodes    Episode[]   @relation("EpisodeStatus")

  @@unique([name, statusTypeId])
}



model Character {
  id           Int       @id @default(autoincrement())
  name         String
  status       Status    @relation("CharacterStatus", fields: [statusId], references: [id])
  statusId     Int
  species      String
  type         String
  gender       String
  origin       String
  location     String
  image        String
}

model Episode {
  id           Int       @id @default(autoincrement())
  name         String
  air_date     String
  episode      String
  url          String
  created      String
  status       Status    @relation("EpisodeStatus", fields: [statusId], references: [id])
  statusId     Int
}
